{% extends 'base.html'%}
{% load static %}
{% load bootstrap4 %}

{% block content %}

<!-- <h3>Search</h3>
{% csrf_token %}
<input type="search" id="search" name="search">
<ul id="search-results"></ul> -->
<div class="pad"><input type="text" name="search" id="txtSearch" onkeyup="searchOpen()" /><button><i
      class="fa fa-search" aria-hidden="true"></i></button>
</div>




<!-- Student List Start -->
<div class="row justify-content-start mar" style="width: 100%;">
  <!-- <ul style="list-style-type:none;"> -->

  <table class="table table-striped table-hover table-bordered pad js-serial">
    <thead>
      <tr class="head-text fre">

        <th class="col-3">Student List</th>
        <th class="col-3">Action</th>
      </tr>
    </thead>
    {% for i in infolist %}

    <tbody>
      <tr>

        <td>
          <a href="{% url 'student-detail' i.pk %}"> <b class="list-name dance">{{ i.name_text }}</b></a>
        </td>
        <td>
          <a class="btn btn-danger" data-toggle="modal" data-target="#myModal{{i.id}}" href="{% url 'delete' i.pk %}"><i
              class="fa fa-trash-o" style="font-size:26px"></i></a>
        </td>
      </tr>


      <!-- Delete form model -->
      <div class="modal" id="myModal{{i.id}}" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            <!-- Modal body -->
            <div class="modal-body">
              <form action="{% url 'delete' i.pk %}" method="post">{% csrf_token %}
                <p><b>Are you sure you want to delete "{{ i.name_text }}"?</b> </p>
                <input type="submit" class="btn btn-danger btn-lg" value="Confirm" />
              </form>
            </div>
          </div>
        </div>
      </div>
    </tbody>
    {% endfor %}

  </table>
</div>
</div>
<script>
  function searchOpen() {
    var search = $('#txtSearch').val()
    var data = {
      search: search
    };
    $.ajax({
      url: '/search.json',
      data: data,
      dataType: 'jsonp',
      jsonp: 'callback',
      jsonpCallback: 'searchResult'
    });
  }
  function searchResult(data) {
    $("#txtSearch").autocomplete({
      source: data
    });
  }

  function addRowCount(tableAttr) {
    $(tableAttr).each(function () {
      $('th:first-child, thead td:first-child', this).each(function () {
        var tag = $(this).prop('tagName');
        $(this).before('<' + tag + '>S.N.</' + tag + '>');
      });
      $('td:first-child', this).each(function (i) {
        $(this).before('<td>' + (i + 1) + '</td>');
      });
    });
  }

  // Call the function with table attr on which you want automatic serial number
  addRowCount('.js-serial');
</script>
{% endblock %}