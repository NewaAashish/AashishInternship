{% extends 'base.html'%}
{% load static %}
{% load bootstrap4 %}

{% block content %}

<!-- <h3>Search</h3>
{% csrf_token %}
<input type="search" id="search" name="search">
<ul id="search-results"></ul> -->
<input type="text" name="search" id="txtSearch" onkeyup="searchOpen()" /><button><i class="fa fa-search" aria-hidden="true"></i></button>




<!-- Student List Start -->
<div class="row justify-content-start mar">
  <!-- <ul style="list-style-type:none;"> -->

  <table class="table table-striped table-bordered" style="width:100%">
    <thead>
      <tr>
        <th>S.N.</th>
        <th class="col-3">Student List</th>
        <th class="col-3">Action</th>
      </tr>
    </thead>
    {% for i in infolist %}

    <tbody>
      <tr>
        <td></td>
        <td>
          <a href="{% url 'student-detail' i.pk %}"> <b class=" dance">{{ i.name_text }}</b></a>
        </td>
        <td>
          <a class="btn btn-danger" data-toggle="modal" data-target="#myModal{{i.id}}" href="{% url 'delete' i.pk %}"><i
              class="fa fa-trash-o" style="font-size:26px"></i></a>
        </td>
      </tr>


      <!-- Delete form model -->
      <div class="modal" id="myModal{{i.id}}" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            <!-- Modal body -->
            <div class="modal-body">
              <form action="{% url 'delete' i.pk %}" method="post">{% csrf_token %}
                <p><b>Are you sure you want to delete "{{ i.name_text }}"?</b> </p>
                <input type="submit" class="btn btn-danger btn-lg" value="Confirm" />
              </form>
            </div>
          </div>
        </div>
      </div>
    </tbody>
    {% endfor %}

  </table>
  <!-- Delete form model end -->
  <!-- </ul> -->
  <!-- Student List end -->
</div>

</div>
<script>
  // $(function() {

  // $('#search').keyup(function() {

  //     $.ajax({
  //         type: "POST",
  //         url: "/student/search",
  //         data: {
  //             'search_text' : $('#search').val(),
  //             'csrfmiddlewaretoken' : $("input[name=csrfmiddlewaretoken]").val()
  //         },
  //         success: searchSuccess,
  //         dataType: 'html'
  //     });
  // });
  // });

  // function searchSuccess(data, textStatus, jqXHR)
  // {
  // $('#search-results').html(data)
  // }

  function searchOpen() {
    var search = $('#txtSearch').val()
    var data = {
      search: search
    };
    $.ajax({
      url: '/search.json',
      data: data,
      dataType: 'jsonp',
      jsonp: 'callback',
      jsonpCallback: 'searchResult'
    });
  }
  function searchResult(data) {
    $("#txtSearch").autocomplete({
      source: data
    });
  }</script>
{% endblock %}